# bitset

 [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT) [![SonarQube](https://github.com/mocelik/small-bitset/actions/workflows/build.yml/badge.svg)](https://github.com/mocelik/small-bitset/actions/workflows/build.yml) [![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=mocelik_small-bitset&metric=alert_status&token=e850a0453903c61bb30f7645c1bcb702a7228fdf)](https://sonarcloud.io/summary/new_code?id=mocelik_small-bitset) [![Coverage](https://sonarcloud.io/api/project_badges/measure?project=mocelik_small-bitset&metric=coverage&token=e850a0453903c61bb30f7645c1bcb702a7228fdf)](https://sonarcloud.io/summary/new_code?id=mocelik_small-bitset)

An implementation of a [std::bitset](https://en.cppreference.com/w/cpp/utility/bitset.html), except with an additional template parameter specifying the type of the underlying data units to allow small size optimizations.

# Size Comparison
The size of the a bitset for an N number of bits can be very different between this implementation and the standard one. The table below shows the size (in bytes) of a bitset for N bits.

|   N   | `std::bitset<N>` | `nonstd::bitset<N>` | `nonstd::bitset<N, std::uint16_t>` |
| :---: | :--------------: | :-----------------: | :--------------------------------: |
|   1   |        8         |          1          |                 2                  |
|   8   |        8         |          1          |                 2                  |
|  16   |        8         |          2          |                 2                  |
|  32   |        8         |          4          |                 4                  |
|  64   |        8         |          8          |                 8                  |
|  128  |        16        |         16          |                 16                 |
|  129  |        24        |         17          |                 18                 |

The default nonstd::bitset underlying type is a `std::uint8_t`. Other unsigned integer types may be used as well, like the `uint16_t` shown above.

# Building
Due to the templates, this is a header-only implementation. There is no need to separately compile the header to use in your own projects. Simply include this repository's `include` directory in your include paths to use it.

# Unit Tests
You can run the unit tests by executing `make test`. This requires an internet connection to download `gtest`.

# Coverage
Coverage reports are generated by gcovr and analyzed through [SonarQube](https://sonarcloud.io/summary/new_code?id=mocelik_small-bitset). To generate the HTML report yourself, run `make coverage`.
